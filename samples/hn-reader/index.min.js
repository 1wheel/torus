!function(t){var n={};function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,n,e){s.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,n){if(1&n&&(t=s(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)s.d(e,o,function(n){return t[n]}.bind(null,o));return e},s.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(n,"a",n),n},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.p="",s(s.s=0)}([function(t,n,s){const{renderJDOM:e,Component:o,Styled:i,StyledComponent:c,List:h,ListOf:r,Record:d,Store:f,StoreOf:u,Router:m}=s(1),{jdom:g}=s(2);t.exports={renderJDOM:e,Component:o,Styled:i,StyledComponent:c,List:h,ListOf:r,Record:d,Store:f,StoreOf:u,Router:m,jdom:g}},function(t,n,s){const e=["type","value","selected","indeterminate","tabIndex","checked","disabled"];let o=0;const i=t=>"object"==typeof t&&null!==t,c=t=>{void 0===t.attrs&&(t.attrs={}),void 0===t.events&&(t.events={}),void 0===t.children&&(t.children=[])},h=t=>Array.isArray(t)?t:[t],r=()=>document.createComment(""),d=new Map;const f=(t,n,s)=>{function u(n){if(void 0!==t&&t!==n&&t.parentNode){const s=r();d.set(s,n),t.parentNode.replaceChild(s,t)}t=n}if(o++,n!==s)if(s instanceof Node)u(s);else if(null===s)u(r());else if("string"==typeof s||"number"==typeof s)u(document.createTextNode(s));else if(i(s)){(!i(n)||n instanceof Node)&&(n={tag:null}),c(n),c(s),n.tag===s.tag&&t||(void 0===t||c(n={}),u(document.createElement(s.tag)));for(const o of Object.keys(s.attrs))switch(o){case"class":const i=h(n.attrs.class||[]),c=h(s.attrs.class||[]);for(const n of c)t.classList.add(n);for(const n of i)c.includes(n)||t.classList.remove(n);break;case"style":const r=n.attrs.style||{},d=s.attrs.style||{};for(const n of Object.keys(d))d[n]!==r[n]&&(t.style[n]=d[n]);for(const n of Object.keys(r))void 0===d[n]&&(t.style[n]="");break;default:e.includes(o)?t[o]=s.attrs[o]:s.attrs[o]!==n.attrs[o]&&t.setAttribute(o,s.attrs[o])}for(const o of Object.keys(n.attrs))void 0===s.attrs[o]&&(e.includes(o)?t[o]=null:t.removeAttribute(o));const o=(t,n,s)=>{for(const e in t){const o=h(t[e]||[]),i=h(n[e]);for(const t of o)i.includes(t)||s(e,t)}};o(s.events,n.events,(n,s)=>{t.addEventListener(n,s)}),o(n.events,s.events,(n,s)=>{t.removeEventListener(n,s)});const m=t.childNodes,g=n.children,a=s.children;if(a.length+g.length>0)if(g.length<a.length){let n;for(n=0;n<g.length;n++)f(m[n],g[n],a[n]);for(;n<a.length;)t.appendChild(f(void 0,void 0,a[n])),n++}else{let n;for(n=0;n<a.length;n++)f(m[n],g[n],a[n]);for(;n<g.length;){const s=r();t.replaceChild(s,m[n]),d.set(s,null),n++}}}return 0===--o&&function(){for(const[t,n]of d.entries())null===n?t.parentNode.removeChild(t):t.parentNode.replaceChild(n,t);d.clear()}(),t},u=()=>({source:null,handler:()=>{}});class m{constructor(...t){this.jdom=void 0,this.node=void 0,this.event=u(),this.init(...t),this.render()}static from(t){return class extends m{init(...t){this.args=t}compose(){return t(...this.args)}}}init(){}get record(){return this.event.source}bind(t,n){if(this.unbind(),!(t instanceof x))throw new Error("Event source to bind() to is not an instance of Evented");this.event={source:t,handler:n},t.addHandler(n)}unbind(){this.record&&this.record.removeHandler(this.event.handler),this.event=u()}remove(){this.unbind()}compose(t){return null}preprocess(t,n){return t}render(t){t=t||this.record&&this.record.summarize();const n=this.preprocess(this.compose(t),t);return this.node=f(this.node,this.jdom,n),this.jdom=n,this.jdom}}const g=new Set;let a=null;const p=(t,n)=>t+"{"+n+"}",b=(t,n)=>{let s=[],e="";for(const o of Object.keys(n)){const i=n[o];if("@"===o[0])o.startsWith("@media")?s.push(p(o,b(t,i).join(""))):s.push(p(o,b("",i).join("")));else if("object"==typeof i)if(o.includes("&")){const n=o.replace(/&/g,t);s=s.concat(b(n,i))}else s=s.concat(b(t+" "+o,i));else e+=o+":"+i+";"}return e&&s.push(p(t,e)),s},j=t=>{const n=(t=>{const n=JSON.stringify(t).replace(/\s+/g," ");let s=n.length,e=1989;for(;s;)e=13*e^n.charCodeAt(--s);return"_torus"+(e>>>0)})(t);if(!g.has(n)){a||(styleElement=document.createElement("style"),styleElement.setAttribute("data-torus",""),document.head.appendChild(styleElement),a=styleElement.sheet);const s=b("."+n,t);for(const t of s)a.insertRule(t,a.cssRules.length);g.add(n)}return n},w=t=>(class extends t{styles(t){return{}}preprocess(t,n){return i(t)&&(t.attrs=t.attrs||{},t.attrs.class=h(t.attrs.class||[]),t.attrs.class.push(j(this.styles(n)))),t}}),_=w(m);class y extends m{get itemClass(){return m}init(t){this.store=t,this.items=new Map,this.filterFn=null,this.bind(this.store,()=>this.itemsChanged()),this.itemsChanged()}itemsChanged(){const t=this.store.summarize();for(const n of this.items.keys())t.includes(n)||(this.items.get(n).remove(),this.items.delete(n));for(const n of t)this.items.has(n)||this.items.set(n,new this.itemClass(n));let n=[...this.items.entries()];null!==this.filterFn&&(n=n.filter(t=>this.filterFn(t[0]))),n.sort((n,s)=>t.indexOf(n[0])-t.indexOf(s[0])),this.items=new Map(n),this.render()}filter(t){this.filterFn=t,this.itemsChanged()}unfilter(){this.filterFn=null,this.itemsChanged()}get nodes(){return[...this.items.values()].map(t=>t.node)}remove(){super.remove();for(const t of this.items.values())t.remove()}compose(t){return{tag:"ul",children:this.nodes}}}class x{constructor(){this.eventTargets=new Set}summarize(){throw new Error(`#summarize() not implemented in ${this.constructor.name}`)}emitEvent(){const t=this.summarize();for(const n of this.eventTargets)n(t)}addHandler(t){this.eventTargets.add(t),t(this.summarize())}removeHandler(t){this.eventTargets.delete(t)}}class E extends x{constructor(t,n={}){super(),i(t)&&(n=t,t=null),this.id=t,this.data=n}update(t){Object.assign(this.data,t),this.emitEvent()}get(t){return this.data[t]}summarize(){return Object.assign({},this.data,{id:this.id})}serialize(){return this.summarize()}}class l extends x{constructor(t=[]){super(),this.reset(t)}get recordClass(){return E}get comparator(){return null}create(t,n){this.add(new this.recordClass(t,n))}add(t){this.records.add(t),this.emitEvent()}remove(t){this.records.delete(t),this.emitEvent()}reset(t){this.records=new Set(t),this.emitEvent()}summarize(){return[...this.records].map(t=>[this.comparator?this.comparator(t):null,t]).sort((t,n)=>t[0]<n[0]?-1:t[0]>n[0]?1:0).map(t=>t[1])}serialize(){return this.summarize().map(t=>t.serialize())}}const O=t=>{let n;const s=[];for(;null!==n;)if(n=/:\w+/.exec(t)){const e=n[0];s.push(e.substr(1)),t=t.replace(e,"(.*)")}return[new RegExp(t),s]};const z={renderJDOM:f,Component:m,Styled:w,StyledComponent:_,List:y,ListOf:t=>(class extends y{get itemClass(){return t}}),Record:E,Store:l,StoreOf:t=>(class extends l{get recordClass(){return t}}),Router:class extends x{constructor(t){super(),this.routes=Object.entries(t).map(([t,n])=>[t,...O(n)]),this.lastMatch=["",null],this._cb=(()=>this.route(location.pathname)),window.addEventListener("popstate",this._cb),this._cb()}summarize(){return this.lastMatch}go(t){history.pushState(null,document.title,t),this.route(t)}route(t){for(const[n,s,e]of this.routes){const o=s.exec(t);if(null!==o){const t={},s=o.slice(1);e.forEach((n,e)=>t[n]=s[e]),this.lastMatch=[n,t];break}}this.emitEvent()}remove(){window.removeEventListener("popstate",this._cb)}}};if("object"==typeof window)for(const t of Object.keys(z))window[t]=z[t];"object"==typeof t.exports&&(t.exports=z)},function(t,n,s){const e=t=>"string"==typeof t||"number"==typeof t,o=t=>"object"==typeof t&&null!==t,i=(t,n)=>t.substr(0,t.length-n.length),c=t=>String.fromCodePoint(+("0"+/&#(\w+);/.exec(t)[1])),h=(t,n)=>{let s=t[0];for(let e=1;e<=n.length;e++)s+=n[e-1]+t[e];return s};class r{constructor(t){this.idx=0,this.content=t}next(){let t=this.content[this.idx++];return this.idx>this.content.length&&(this.idx=this.content.length),t}backtrack(){this.idx--,this.idx<0&&(this.idx=0)}readUpto(t){const n=this.content.substr(this.idx).indexOf(t);return this.readToNextIdx(n)}readUntil(t){const n=this.content.substr(this.idx).indexOf(t)+t.length;return this.readToNextIdx(n)}readToNextIdx(t){const n=this.content.substr(this.idx);if(-1===t)return this.idx=this.content.length,n;{const s=n.substr(0,t);return this.idx+=t,s}}clipEnd(t){return!!this.content.endsWith(t)&&(this.content=i(this.content,t),!0)}}const d=t=>{let n="";for(let s=0,e=t.length;s<e;s++)n+="-"===t[s]?t[++s].toUpperCase():t[s];return n},f=t=>{if("!"===(t=t.trim())[0])return{jdom:null,selfClosing:!0};if(!t.includes(" ")){const n=t.endsWith("/");return{jdom:{tag:n?i(t,"/"):t,attrs:{},events:{}},selfClosing:n}}const n=new r(t),s=n.clipEnd("/");let e="",o=!1,c=!1;const h=[];let f=0;const u=t=>{(""!==(e=e.trim())||t)&&(h.push({type:f,value:e}),o=!1,e="")};for(let t=n.next();void 0!==t;t=n.next())switch(t){case"=":c?e+=t:(u(),o=!0,f=1);break;case" ":c?e+=t:o||(u(),f=0);break;case"\\":c&&(t=n.next(),e+=t);break;case'"':c?(c=!1,u(!0),f=0):1===f&&(c=!0);break;default:e+=t,o=!1}u();let m="";const g={},a={};m=h.shift().value;let p=null,b=h.shift();const j=()=>{p=b,b=h.shift()};for(;void 0!==b;){if(1===b.type){let t=p.value,n=b.value.trim();if(n.startsWith("jdom_tmp_func"))a[t.substr(2)]=[n];else if("class"===t)n&&(g[t]=n.split(" "));else if("style"===t){n.endsWith(";")&&(n=n.substr(0,n.length-1));const s={};for(const t of n.split(";")){const n=t.indexOf(":"),e=t.substr(0,n),o=t.substr(n+1);s[d(e.trim())]=o.trim()}g[t]=s}else g[t]=n;j()}else p&&(g[p.value]=!0);j()}return p&&0===p.type&&(g[p.value]=!0),{jdom:{tag:m,attrs:g,events:a},selfClosing:s}},u=t=>{const n=[];let s=null,e=!1;const o=()=>{e&&!s.trim()||s&&n.push(s),s=null,e=!1},i=t=>{e||(o(),e=!0,s=""),s+=t};for(let n=t.next();void 0!==n;n=t.next())if("<"===n){if(o(),"/"===t.next()){t.readUntil(">");break}{t.backtrack();const n=f(t.readUpto(">"));t.next(),s=n&&n.jdom,n.selfClosing||null===s||(s.children=u(t))}}else i("&"===n?c(n+t.readUntil(";")):n);return o(),n},m=new Map,g=/jdom_tmp_(?:func|obj)_\[(\d+)\]/,a=(t,n)=>{if((t=>"string"==typeof t&&t.includes("jdom_tmp_"))(t)){const[s,e]=g.exec(t),o=t.split(s),i=a(o[1],n);let c=[];return o[0]&&c.push(o[0]),Array.isArray(n[e])?c=c.concat(n[e]):c.push(n[e]),i.length&&(c=c.concat(i)),c}return t?[t]:[]},p=(t,n)=>{let s=[];for(const e of t)s=s.concat(a(e,n));const e=s[0],i=s[s.length-1];"string"!=typeof e||e.trim()||s.shift(),"string"!=typeof i||i.trim()||s.pop();for(const t of s)o(t)&&w(t,n);return s},b=(t,n)=>{if(t.length<16)return t;{let s=g.exec(t);if(s&&t.trim()===s[0])return n[s[1]];for(;s;){let e=t.split(s[0]);t=e[0]+n[s[1]]+e[1],s=g.exec(t)}return t}},j=(t,n)=>{t.forEach((s,i)=>{e(s)?t[i]=b(s.toString(),n):Array.isArray(s)?j(s,n):o(s)&&w(s,n)})},w=(t,n)=>{for(const s of Object.keys(t)){const i=t[s];e(i)?t[s]=b(i.toString(),n):Array.isArray(i)?"children"===s?t.children=p(i,n):j(i,n):o(i)&&w(i,n)}},_={jdom:(t,...n)=>{const s=t.join("jdom_tpl_joiner");try{if(!m.has(s)){const e=n.map((t,n)=>t instanceof Function?`jdom_tmp_func_[${n}]`:`jdom_tmp_obj_[${n}]`),o=new r(h(t.map(t=>t.replace(/\s+/g," ")),e)),i=u(o)[0];m.set(s,t=>{if("string"==typeof i)return b(i,t);if("object"==typeof i){const n={},s=JSON.parse(JSON.stringify(i));return w(Object.assign(n,s),t),n}return null})}return m.get(s)(n)}catch(s){return console.error(`Error parsing template: ${h(t,n)}\n${"stack"in s?s.stack:s}`),""}}};if("object"==typeof window)for(const t in _)window[t]=_[t];"object"==typeof t.exports&&(t.exports=_)}]);