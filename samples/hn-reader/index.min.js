!function(t){var n={};function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,n,e){s.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,n){if(1&n&&(t=s(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)s.d(e,o,function(n){return t[n]}.bind(null,o));return e},s.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(n,"a",n),n},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.p="",s(s.s=0)}([function(t,n,s){const{renderJDOM:e,Component:o,Styled:i,StyledComponent:c,List:r,ListOf:h,Record:d,Store:f,StoreOf:u,Router:m}=s(1),{jdom:g}=s(2);t.exports={renderJDOM:e,Component:o,Styled:i,StyledComponent:c,List:r,ListOf:h,Record:d,Store:f,StoreOf:u,Router:m,jdom:g}},function(t,n,s){const e=["type","value","selected","indeterminate","tabIndex","checked","disabled"];let o=0;const i=t=>null!==t&&"object"==typeof t,c=t=>{t.attrs=t.attrs||{},t.events=t.events||{},t.children=t.children||[]},r=t=>Array.isArray(t)?t:[t],h=()=>document.createComment("");let d=[];const f=0,u=1,m=2;const g=(t,n,s)=>{for(const e of Object.keys(t)){const o=r(t[e]||[]),i=r(n[e]);for(const t of o)i.includes(t)||s(e,t)}},a=(t,n,s)=>{const r=n=>{t&&t!==n&&d.push([m,t,n]),t=n};if(o++,n!==s)if(null===s)r(h());else if("string"==typeof s||"number"==typeof s)r(document.createTextNode(s));else if(void 0!==s.nodeType)r(s);else{(!i(n)||n&&void 0!==n.nodeType)&&(n={tag:null}),c(n),c(s),n.tag===s.tag&&t||(void 0===t||c(n={}),r(document.createElement(s.tag)));for(const o of Object.keys(s.attrs))switch(o){case"class":const i=s.attrs.class;Array.isArray(i)?t.className=i.join(" "):t.className=i;break;case"style":const c=n.attrs.style||{},r=s.attrs.style||{};for(const n of Object.keys(r))r[n]!==c[n]&&(t.style[n]=r[n]);for(const n of Object.keys(c))void 0===r[n]&&(t.style[n]="");break;default:e.includes(o)?t[o]=s.attrs[o]:s.attrs[o]!==n.attrs[o]&&t.setAttribute(o,s.attrs[o])}for(const o of Object.keys(n.attrs))void 0===s.attrs[o]&&(e.includes(o)?t[o]=null:t.removeAttribute(o));g(s.events,n.events,(n,s)=>{t.addEventListener(n,s)}),g(n.events,s.events,(n,s)=>{t.removeEventListener(n,s)});const o=n._nodes||[],h=n.children,m=s.children,p=h.length,b=m.length,j=p<b?p:b;if(b>0||p>0){let n;for(n=0;n<j;n++){const t=a(o[n],h[n],m[n]);o.splice(n,1,t)}if(p<b)for(;n<b;){const s=a(void 0,void 0,m[n]);d.push([f,t,s]),o.splice(n,0,s),n++}else{for(;n<p;)d.push([u,t,o[n]]),n++;o.splice(b,p-b)}s._nodes=o}}return 0===--o&&function(){const t=d.length;for(let n=0;n<t;n++){const t=d[n],s=t[0];if(s===u)t[1].removeChild(t[2]);else if(s===m){const n=t[1],s=h(),e=n.parentNode;e.replaceChild(s,n),t[1]=s,t[3]=e}}for(let n=0;n<t;n++){const t=d[n],s=t[0];s===f?t[1].appendChild(t[2]):s===m&&t[3].replaceChild(t[2],t[1])}d=[]}(),t},p=()=>({source:null,handler:()=>{}});class b{constructor(...t){this.jdom=void 0,this.node=void 0,this.event=p(),this.init(...t),void 0===this.node&&this.render()}static from(t){return class extends b{init(...t){this.args=t}compose(){return t(...this.args)}}}init(){}get record(){return this.event.source}bind(t,n){if(this.unbind(),!(t instanceof z))throw new Error("Event source to bind() to is not an instance of Evented");this.event={source:t,handler:n},t.addHandler(n)}unbind(){this.record&&this.record.removeHandler(this.event.handler),this.event=p()}remove(){this.unbind()}compose(t){return null}preprocess(t,n){return t}render(t){t=t||this.record&&this.record.summarize();const n=this.preprocess(this.compose(t),t);try{this.node=a(this.node,this.jdom,n)}catch(t){console.error("Error rendering updates",t)}return this.jdom=n}}const j=new Set;let y=null;const w=(t,n)=>t+"{"+n+"}",_=(t,n)=>{let s=[],e="";for(const o of Object.keys(n)){const i=n[o];if("@"===o[0])o.startsWith("@media")?s.push(w(o,_(t,i).join(""))):s.push(w(o,_("",i).join("")));else if("object"==typeof i)if(o.includes("&")){const n=o.replace(/&/g,t);s=s.concat(_(n,i))}else s=s.concat(_(t+" "+o,i));else e+=o+":"+i+";"}return e&&s.push(w(t,e)),s},x=t=>{const n=(t=>{const n=JSON.stringify(t);let s=n.length,e=1989;for(;s;)e=13*e^n.charCodeAt(--s);return"_torus"+(e>>>0)})(t);if(!j.has(n)){y||(styleElement=document.createElement("style"),styleElement.setAttribute("data-torus",""),document.head.appendChild(styleElement),y=styleElement.sheet);const s=_("."+n,t);for(const t of s)y.insertRule(t,y.cssRules.length);j.add(n)}return n},E=t=>(class extends t{styles(t){return{}}preprocess(t,n){return i(t)&&(t.attrs=t.attrs||{},t.attrs.class=r(t.attrs.class||[]),t.attrs.class.push(x(this.styles(n)))),t}}),O=E(b);class l extends b{get itemClass(){return b}init(t){this.store=t,this.items=new Map,this.filterFn=null,this.bind(this.store,()=>this.itemsChanged()),this.itemsChanged()}itemsChanged(){const t=this.store.summarize();for(const n of this.items.keys())t.includes(n)||(this.items.get(n).remove(),this.items.delete(n));for(const n of t)this.items.has(n)||this.items.set(n,new this.itemClass(n));let n=[...this.items.entries()];null!==this.filterFn&&(n=n.filter(t=>this.filterFn(t[0]))),n.sort((n,s)=>t.indexOf(n[0])-t.indexOf(s[0])),this.items=new Map(n),this.render()}filter(t){this.filterFn=t,this.itemsChanged()}unfilter(){this.filterFn=null,this.itemsChanged()}get nodes(){return[...this.items.values()].map(t=>t.node)}remove(){super.remove();for(const t of this.items.values())t.remove()}compose(t){return{tag:"ul",children:this.nodes}}}class z{constructor(){this.eventTargets=new Set}summarize(){throw new Error(`#summarize() not implemented in ${this.constructor.name}`)}emitEvent(){const t=this.summarize();for(const n of this.eventTargets)n(t)}addHandler(t){this.eventTargets.add(t),t(this.summarize())}removeHandler(t){this.eventTargets.delete(t)}}class A extends z{constructor(t,n={}){super(),i(t)&&(n=t,t=null),this.id=t,this.data=n}update(t){Object.assign(this.data,t),this.emitEvent()}get(t){return this.data[t]}summarize(){return Object.assign({},this.data,{id:this.id})}serialize(){return this.summarize()}}class M extends z{constructor(t=[]){super(),this.reset(t)}get recordClass(){return A}get comparator(){return null}create(t,n){this.add(new this.recordClass(t,n))}add(t){this.records.add(t),this.emitEvent()}remove(t){this.records.delete(t),this.emitEvent()}reset(t){this.records=new Set(t),this.emitEvent()}summarize(){return[...this.records].map(t=>[this.comparator?this.comparator(t):null,t]).sort((t,n)=>t[0]<n[0]?-1:t[0]>n[0]?1:0).map(t=>t[1])}serialize(){return this.summarize().map(t=>t.serialize())}}const C=t=>{let n;const s=[];for(;null!==n;)if(n=/:\w+/.exec(t)){const e=n[0];s.push(e.substr(1)),t=t.replace(e,"(.*)")}return[new RegExp(t),s]};const R={renderJDOM:a,Component:b,Styled:E,StyledComponent:O,List:l,ListOf:t=>(class extends l{get itemClass(){return t}}),Record:A,Store:M,StoreOf:t=>(class extends M{get recordClass(){return t}}),Router:class extends z{constructor(t){super(),this.routes=Object.entries(t).map(([t,n])=>[t,...C(n)]),this.lastMatch=["",null],this._cb=(()=>this.route(location.pathname)),window.addEventListener("popstate",this._cb),this._cb()}summarize(){return this.lastMatch}go(t){history.pushState(null,document.title,t),this.route(t)}route(t){for(const[n,s,e]of this.routes){const o=s.exec(t);if(null!==o){const t={},s=o.slice(1);e.forEach((n,e)=>t[n]=s[e]),this.lastMatch=[n,t];break}}this.emitEvent()}remove(){window.removeEventListener("popstate",this._cb)}}};if("object"==typeof window)for(const t of Object.keys(R))window[t]=R[t];"object"==typeof t.exports&&(t.exports=R)},function(t,n,s){const e=t=>null!==t&&"object"==typeof t,o=(t,n)=>t.substr(0,t.length-n.length),i=t=>String.fromCodePoint(+("0"+/&#(\w+);/.exec(t)[1])),c=(t,n)=>{let s=t[0];for(let e=1,o=n.length;e<=o;e++)s+=n[e-1]+t[e];return s};class r{constructor(t){this.idx=0,this.content=t,this.len=t.length}next(){let t=this.content[this.idx++];return void 0===t&&(this.idx=this.len),t}backtrack(){this.idx--}readUpto(t){const n=this.content.substr(this.idx).indexOf(t);return this.readToNextIdx(n)}readUntil(t){const n=this.content.substr(this.idx).indexOf(t)+t.length;return this.readToNextIdx(n)}readToNextIdx(t){const n=this.content.substr(this.idx);if(-1===t)return this.idx=this.len,n;{const s=n.substr(0,t);return this.idx+=t,s}}clipEnd(t){return!!this.content.endsWith(t)&&(this.content=o(this.content,t),!0)}}const h=t=>{let n="";for(let s=0,e=t.length;s<e;s++)n+="-"===t[s]?t[++s].toUpperCase():t[s];return n},d=t=>{if("!"===(t=t.trim())[0])return{jdom:null,selfClosing:!0};if(!t.includes(" ")){const n=t.endsWith("/");return{jdom:{tag:n?o(t,"/"):t,attrs:{},events:{}},selfClosing:n}}const n=new r(t),s=n.clipEnd("/");let e="",i=!1,c=!1;const d=[];let f=0;const u=t=>{(""!==(e=e.trim())||t)&&(d.push({type:f,value:e}),i=!1,e="")};for(let t=n.next();void 0!==t;t=n.next())switch(t){case"=":c?e+=t:(u(),i=!0,f=1);break;case" ":c?e+=t:i||(u(),f=0);break;case"\\":c&&(t=n.next(),e+=t);break;case'"':c?(c=!1,u(!0),f=0):1===f&&(c=!0);break;default:e+=t,i=!1}u();let m="";const g={},a={};m=d.shift().value;let p=null,b=d.shift();const j=()=>{p=b,b=d.shift()};for(;void 0!==b;){if(1===b.type){let t=p.value,n=b.value.trim();if(n.startsWith("jdom_tmp_func"))a[t.substr(2)]=[n];else if("class"===t)n&&(g[t]=n.split(" "));else if("style"===t){n.endsWith(";")&&(n=n.substr(0,n.length-1));const s={};for(const t of n.split(";")){const n=t.indexOf(":"),e=t.substr(0,n),o=t.substr(n+1);s[h(e.trim())]=o.trim()}g[t]=s}else g[t]=n;j()}else p&&(g[p.value]=!0);j()}return p&&0===p.type&&(g[p.value]=!0),{jdom:{tag:m,attrs:g,events:a},selfClosing:s}},f=t=>{const n=[];let s=null,e=!1;const o=()=>{e&&!s.trim()||s&&n.push(s),s=null,e=!1},c=t=>{e||(o(),e=!0,s=""),s+=t};for(let n=t.next();void 0!==n;n=t.next())if("<"===n){if(o(),"/"===t.next()){t.readUntil(">");break}{t.backtrack();const n=d(t.readUpto(">"));t.next(),s=n&&n.jdom,n.selfClosing||null===s||(s.children=f(t))}}else c("&"===n?i(n+t.readUntil(";")):n);return o(),n},u=new Map,m=/jdom_tmp_(?:func|obj)_\[(\d+)\]/,g=(t,n)=>{if((t=>"string"==typeof t&&t.includes("jdom_tmp_"))(t)){const s=m.exec(t),e=t.split(s[0]),o=s[1],i=g(e[1],n);let c=[];return e[0]&&c.push(e[0]),Array.isArray(n[o])?c=c.concat(n[o]):c.push(n[o]),i.length&&(c=c.concat(i)),c}return t?[t]:[]},a=(t,n)=>{let s=[];for(const o of t)for(const t of g(o,n))e(t)&&j(t,n),s.push(t);const o=s[0],i=s[s.length-1];return"string"!=typeof o||o.trim()||s.shift(),"string"!=typeof i||i.trim()||s.pop(),s},p=(t,n)=>{if(t.length<16)return t;{let s=m.exec(t);if(s&&t.trim()===s[0])return n[s[1]];for(;s;){let e=t.split(s[0]);t=e[0]+n[s[1]]+e[1],s=m.exec(t)}return t}},b=(t,n)=>{for(let s=0,o=t.length;s<o;s++){const o=t[s];"string"==typeof o?t[s]=p(o.toString(),n):Array.isArray(o)?b(o,n):e(o)&&j(o,n)}},j=(t,n)=>{for(const s of Object.keys(t)){const o=t[s];"string"==typeof o?t[s]=p(o.toString(),n):Array.isArray(o)?"children"===s?t.children=a(o,n):b(o,n):e(o)&&j(o,n)}},y={jdom:(t,...n)=>{const s=t.join("jdom_tpl_joiner");try{if(!u.has(s)){const e=n.map((t,n)=>"function"==typeof t?`jdom_tmp_func_[${n}]`:`jdom_tmp_obj_[${n}]`),o=new r(c(t.map(t=>t.replace(/\s+/g," ")),e)),i=f(o)[0],h=typeof i,d=JSON.stringify(i);u.set(s,t=>{if("string"===h)return p(i,t);if("object"===h){const n={},s=JSON.parse(d);return j(Object.assign(n,s),t),n}return null})}return u.get(s)(n)}catch(s){return console.error(`Error parsing template.\nPlease check for any mismatched brackets, tags, and quotes.\n${c(t,n)}\n${s.stack||s}`),""}}};if("object"==typeof window)for(const t in y)window[t]=y[t];"object"==typeof t.exports&&(t.exports=y)}]);